(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fdacb6ac"],{8695:function(t,a,e){"use strict";var i=e("baa3"),n=e.n(i);n.a},baa3:function(t,a,e){},c616:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pad_5"},[e("div",{staticClass:"query_fields pad_b_no"},[e("el-form",{ref:"queryForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryForm,size:"mini"}},[e("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[e("el-input",{staticClass:"wid_140",attrs:{placeholder:"请输入昵称"},model:{value:t.queryForm.nickname,callback:function(a){t.$set(t.queryForm,"nickname",a)},expression:"queryForm.nickname"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"用户ID",prop:"customid"}},[e("el-input",{staticClass:"wid_140",attrs:{placeholder:"请输入用户ID"},model:{value:t.queryForm.customid,callback:function(a){t.$set(t.queryForm,"customid",a)},expression:"queryForm.customid"}})],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.resetData("queryForm")}}},[t._v("重置")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handle_refresh}},[t._v("刷新")])],1)],1)],1),t._v(" "),e("div",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"customid",label:"用户ID",width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"nickname",label:"昵称","show-overflow-tooltip":!0,width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"phone",label:"电话",width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"",label:"性别",width:"50"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.sex?e("span",[t._v("男")]):t._e(),t._v(" "),2==a.row.sex?e("span",[t._v("女")]):t._e(),t._v(" "),0==a.row.sex?e("span",[t._v("未知")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"",label:"地址",width:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.province+a.row.city))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"agent_name",label:"所属机构",width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handle_detail(a.row)}}},[t._v("聊天列表")])]}}])})],1),t._v(" "),e("div",{staticClass:"block mar_t10"},[e("el-pagination",{attrs:{"current-page":t.currentPage,total:t.pageTotal,"page-size":t.pageSize,background:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.detail_loading,expression:"detail_loading"}],staticClass:"agent_detail",attrs:{title:t.detailForm.detailForm_title+"的聊天记录",visible:t.dialogVisible_detail,width:"50%",center:"","append-to-body":"","close-on-click-modal":!1,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(a){t.dialogVisible_detail=a}}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.detail_tableLoading,expression:"detail_tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.detail_tableData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"first_account",label:"发送者ID",width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"from_nickname",label:"发送者昵称",width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"second_account",label:"接收者ID",width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"to_nickname",label:"接收者昵称",width:""}}),t._v(" "),e("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handle_view(a.row)}}},[t._v("聊天详情")])]}}])})],1),t._v(" "),e("div",{staticClass:"block mar_t10"},[e("el-pagination",{attrs:{"current-page":t.currentPage_detail,total:t.pageTotal_detail,background:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange_detail}})],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){t.dialogVisible_detail=!1}}},[t._v("关 闭")])],1),t._v(" "),e("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.chat_loading,expression:"chat_loading"}],staticClass:"chat_dialog",attrs:{title:"聊天详情",visible:t.chat_dialogVisible,width:"30%",top:"1vh",center:"","append-to-body":"","close-on-click-modal":!1,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(a){t.chat_dialogVisible=a}}},[e("div",{staticClass:"chat_detail"},t._l(t.chatForm.chatInfo_arr,function(a){return e("div",{key:a.chat_id,staticClass:"detai_wrap"},[t.chatForm.from_chatter==a.from_account?e("div",{staticClass:"clearfloat"},[e("h5",{staticClass:"chat_title text_l"},[t._v("\n              "+t._s(a.from_nickname)+"("+t._s(a.from_account)+") "+t._s(new Date(1e3*a.msg_time).toLocaleString())+"\n            ")]),t._v(" "),0==a.msg_type?e("div",{staticClass:"chat_content fl"},[t._v("\n              "+t._s(a.msg_content)+"\n            ")]):1==a.msg_type?e("div",{staticClass:"chat_content fl"},[e("el-image",{staticStyle:{"max-width":"30px","max-height":"50px"},attrs:{src:a.img_min_url,"preview-src-list":[a.img_src_url]}})],1):t._e()]):e("div",{staticClass:"clearfloat"},[e("h5",{staticClass:"chat_title text_r"},[t._v("\n              "+t._s(a.from_nickname)+"("+t._s(a.from_account)+") "+t._s(new Date(1e3*a.msg_time).toLocaleString())+"\n            ")]),t._v(" "),0==a.msg_type?e("div",{staticClass:"chat_content fr"},[t._v("\n              "+t._s(a.msg_content)+"\n            ")]):1==a.msg_type?e("div",{staticClass:"chat_content fr"},[e("el-image",{staticStyle:{"max-width":"30px","max-height":"50px"},attrs:{src:a.img_min_url,"preview-src-list":[a.img_src_url]}})],1):t._e()])])}),0),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"block mar_t10"},[e("el-pagination",{attrs:{"current-page":t.currentPage_chat,total:t.pageTotal_chat,"page-size":t.pageSize_chat,background:"",small:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange_chat}})],1),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(a){t.chat_dialogVisible=!1}}},[t._v("关 闭")])],1)])],1)],1)},n=[],o=(e("28a5"),e("cf45")),l={name:"chatInfoRecord",data:function(){return{roleId:"",tableLoading:!1,tableData:[],pageTotal:100,currentPage:1,pageSize:10,queryForm:{nickname:"",customid:"",custom_types:[{id:"0",txt:"普通客户"},{id:1,txt:"兼职向导"},{id:2,txt:"全职向导"},{id:3,txt:"角落客服"}],custom_type:""},detail_tableData:[],detail_tableLoading:!1,pageTotal_detail:100,currentPage_detail:1,dialogVisible_detail:!1,detail_loading:!1,detailForm:{detailForm_title:"",customid:""},chat_dialogVisible:!1,chat_loading:!1,pageTotal_chat:100,currentPage_chat:1,pageSize_chat:20,chatForm:{msg_group:"",chatInfo_arr:[],from_chatter:""}}},created:function(){this.initDate(),this.getTableDataList(1),this.roleId=this.$store.getters.roleId},methods:{getTableDataList:function(t){var a=this,e={data:{signInUserId:this.$store.getters.userId,signInRole:this.$store.getters.roleId,customid:this.queryForm.customid,nickname:this.queryForm.nickname,custom_type:this.queryForm.custom_type,pageNum:t,pageSize:this.pageSize}};this.tableLoading=!0,this.$http.post("".concat(o["a"].baseUrl,"/chatInfo/getChatInfoMainList"),e).then(function(t){"0000"==t.data.code&&(console.log(t),a.tableLoading=!1,a.tableData=t.data.data.chatInfoMainList,a.pageTotal=t.data.data.page.pageTotal)}).catch(function(t){})},queryData:function(){this.getTableDataList(1),this.currentPage=1},resetData:function(t){this.$refs[t].resetFields(),this.queryForm.startTime="",this.queryForm.endTime=""},handle_refresh:function(){this.getTableDataList(this.currentPage)},handle_detail:function(t){this.detailForm.detailForm_title=t.nickname,this.detailForm.customid=t.customid,this.dialogVisible_detail=!0,this.getTableDataList_detail(1)},getTableDataList_detail:function(t){var a=this,e={data:{pageNum:t,pageSize:10,customid:this.detailForm.customid}};this.detail_loading=!0,this.$http.post("".concat(o["a"].baseUrl,"/chatInfo/getChatInfoGroupList"),e).then(function(t){"0000"==t.data.code&&(a.detail_tableData=t.data.data.chatInfoGroupList,a.pageTotal_detail=t.data.data.page.pageTotal,a.detail_loading=!1)}).catch(function(t){})},handleCurrentChange:function(t){this.currentPage=t,this.getTableDataList(t)},handleCurrentChange_detail:function(t){this.currentPage_detail=t,this.getTableDataList_detail(t)},handle_view:function(t){this.chat_dialogVisible=!0,this.chatForm.msg_group=t.msg_group,this.chatForm.from_chatter=t.msg_group.split("-")[0],console.log(this.chatForm.from_chatter),this.getDataList_chat(1)},getDataList_chat:function(t){var a=this,e={data:{pageNum:t,pageSize:this.pageSize_chat,msg_group:this.chatForm.msg_group}};this.chat_loading=!0,this.$http.post("".concat(o["a"].baseUrl,"/chatInfo/getChatInfoList"),e).then(function(t){if("0000"==t.data.code){var e=t.data.data.chatInfoList;a.chatForm.chatInfo_arr=e.reverse(),console.log(t),a.pageTotal_chat=t.data.data.page.pageTotal,a.chat_loading=!1}}).catch(function(t){})},handleCurrentChange_chat:function(t){this.currentPage_chat=t,this.getDataList_chat(t)},m_valid_addForm:function(t){var a=!1;return this.$refs[t].validate(function(t){return t?(a=!0,!0):(a=!1,!1)}),a},m_message:function(t,a){this.$message({message:t,type:a})},initDate:function(){Date.prototype.toLocaleString=function(){return this.getFullYear()+"-"+(this.getMonth()+1)+"-"+this.getDate()+" "+this.getHours()+":"+this.getMinutes()+":"+this.getSeconds()}}}},s=l,r=(e("8695"),e("2877")),c=Object(r["a"])(s,i,n,!1,null,"333d0a07",null);a["default"]=c.exports}}]);